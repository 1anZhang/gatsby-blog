---
title: 一口(非常长的)气了解网页动画
date: 2019-03-18 17:25:36
categories:
  - js
---

# 一口气了解网页动画

### 0 前言

首先，从一个问题引入，**什么是动画？**

维基百科上是这样描述的，**动画**是指由许多[帧](https://zh.wikipedia.org/wiki/%E5%B8%A7)静止的画面，以一定的速度（如每秒16张）连续播放时，肉眼因[视觉残象](https://zh.wikipedia.org/wiki/%E8%A7%86%E8%A7%89%E6%AE%8B%E8%B1%A1)产生[错觉](https://zh.wikipedia.org/wiki/%E9%8C%AF%E8%A6%BA)，而误以为画面活动的作品。为了得到活动的画面，每个画面之间都会有细微的改变。

更简单地说，动画只不过是**运动中的图形**，是**一段时间内变化的视觉效果**，尽管看起来制作动画是一种相当新鲜的东西，但有证据表明，运动的图形是从大约5000年前开始尝试的。

看看这幅在伊朗沙赫里索克塔发现的画。这是艺术家试图通过动画在图形中显示运动的最早的例子之一。一只山羊走向一棵树的五张图片，它爬树，吃树叶，然后回来。

![img](https://cdn-images-1.medium.com/max/1600/1*wMxrGVF3tM_hSysMHJctuQ.png)

今天，动画几乎无处不在，但是本篇文章所关注的主要内容是在浏览器中显示的动画。就是我们所说的**web动画**。

![img](https://cdn-images-1.medium.com/max/1600/1*SsjIMxMzCObV6KKozXYGJA.gif)

Web动画是通过不同的技术和技术或这些技术的组合实现的。**运动图形、sprite动画、css动画、javascript动画、svg动画、和WebGL动画**是最常见的技术，但我们可以将其扩展到包括**用户界面动画、基于Web的游戏动画、和数据可视化动画。**创建Web动画还可以通过使用gif、jav小程序，flash和shockwave，但是这些技术在过去的几年中使用率逐渐降低，甚至被淘汰。

### 1 历史

那么，让我们回到web动画之初。1987年，CompuServe推出了**图形交换格式**，其首字母缩写为**gif**更为著名。GIF在网络上作为动画工具的最初用途之一，是让公司有机会通过将其360度旋转来增强其徽标，从而在屏幕上呈现出3D的错觉。

![img](https://cdn-images-1.medium.com/max/1600/1*Ry53XOSQR16hQtKbr5hC1w.gif)

但是在GIF被广泛使用之后，网络动画在接下来的10年里基本上没有出现任何变化。直到90年代末，随着一种叫做**flash**的技术出现，网页变得更加生动。

Flash是一个现在已被弃用的多媒体软件平台，由Adobe创建，用于制作Web动画、丰富的Internet应用程序、桌面应用程序、移动应用程序和游戏，并且在当时没有其他的替代品，Flash很快在开发人员中流行起来，并在Web上使用了多年。

但后来，智能手机诞生了，随着智能手机的诞生，flash开始消亡，由于运行flash时产生的密集的CPU负载，移动设备会很快耗尽电池。但不仅是手机的诞生决定了Flash的未来，苹果还决定不在其任何移动设备（如iPhone和iPad）中支持Flash，因此显著提高了其电池性能和寿命。

![img](https://cdn-images-1.medium.com/max/1600/1*Fay4QFXFAgyyMwQ9o3Sp6g.jpeg)

在苹果和Adobe之间的一场大战之后，苹果取得了胜利，用户开始卸载Flash播放器，世界各地的开发者开始永久删除所有的Flash代码。这两家大公司之间的战争决定了如今用于制作web动画的技术栈。

在flash灭亡后，互联网失去了以往的生动，直到css，特别是直到**css3**的出现。因此，如果GIF是Web动画的第一个版本，那么第二个版本就是Flash，第三个版本是CSS3，不过**javascript**在过去几年中越来越成为首选技术，特别是对于实现大型和复杂的Web动画。值得一提的是，引入**HTML5**也有助于改进当今网络动画的制作方式。



![img](https://cdn-images-1.medium.com/max/1600/1*EmqADOtof-PQ3HjbCsnR3w.png)

部分的javascript框架可以做CSS和原生javascript不能做的事情，常见的库有**greensock animation platform**或**gsap**。

还有一种更加新的**网络动画api**（又称**waapi**）正在完善，这是一种实验性的技术，它通过浏览器来实现复杂的动画序列。这项技术还没有稳定，但我们可以开始去了解它了。

![img](https://cdn-images-1.medium.com/max/1600/1*rMtfVDbuS-5pm5WwHedPPA.png)

### 2 常见类型

作为前端的设计师和工程师，我们用 CSS 去做样式、定位并创建出好看的网站。我们经常用 CSS 去添加页面的运动过渡效果甚至动画，但我们经常做的东西不会超过这些。

动效是一个有助于访客和消费者理解我们设计的强有力工具。这里有些原则能最大限度地应用在我们的工作中。

##### **加载动效**

![img](https://cdn-images-1.medium.com/max/1600/1*tpCucje-cBImHWwG_EYpVA.gif)

虽然互联网的速度比以往任何时候都快，但对于大多数网站来说，加载时间仍然是一个不幸的数字。但这是设计师必须面对的最大挑战之一。用户可能会不耐烦，研究表明大多数用户希望在两秒钟内加载内容，如果他们等待太久，超过8秒，那么大概率会关闭这个网站。

有时优化网站的性能还不够，但是功能动画可以作为一种方法来防止用户变得不耐烦。这是因为他们可以分散用户的注意力，让他们不必等待。也就是说，设计师在将动画加载到他们的网站时应该始终遵循一些规则。目标是提供一种方法来吸引用户的注意力，但您不想提醒他们这样一个事实：他们等待的动画过于复杂和分散了注意力。简单，扁平的形状是这里的经验法则，你应该瞄准动画，帮助扩展你的网站的品牌标识，而不是吸引太多的注意力。

##### **动态背景**

![img](https://cdn-images-1.medium.com/max/1600/1*UqWgXVovVag1Uskjmx-rzA.gif)

一个整洁的动画背景可以使你的网站从竞争中脱颖而出，但同样的规则在加载动画也适用于这里。背景动画应该补充网站的现有内容，而不是作为主要内容，这意味着在引人注目和分散注意力之间要做到微妙的平衡。我们要尽量保证背景动画的简洁性。最重要的是确保动画不会完全吸引到用户的注意力。[[用户体验改善网页设计]](https://www.upwork.com/hilling/forclients/9-ways-improve-ux-website-content/)强调动画永远不要让文本更难阅读，这也就是为什么简洁性是很重要的原因。动画背景需要作为内容的补充，而不是分散你的注意力。

##### **整页动效**

![img](https://cdn-images-1.medium.com/max/1600/1*Is78XKyx7SOtbaaqa67B5Q.gif)

目前[网页设计动画](https://www.invisionapp.com/inside-design/web-animation-ux/)中的大部分哲学都倾向于实用动画。他们认为，实现动画的最佳方法是提高用户体验，并使网站导航过程更加直观。但是，更奢侈的动画可以帮助你的应用程序或网站脱颖而出，如果你想要一些视觉上令人印象深刻的东西，那么利用整页动画的网站是一个很好的选择。

##### **菜单动效**

![img](https://cdn-images-1.medium.com/max/1600/1*m2TxoUIx326uiSAnW3AIBw.gif)

动画最大的优点之一是它们可以让你用更少的时间做更多的事情。在Web设计中，大多数设计师都在朝着这样一种理念发展：当用户浏览内容时，尽可能少地使用不必要的转换，更直观的动画菜单可以帮助你最大限度地利用你的页面。其中最流行的是滑动菜单。无论它们是占据应用程序的侧面还是顶部，它们都允许在不挤出内容的情况下立即访问客户需要的所有导航信息。当你试图设计出能够在手机上很好地工作的响应式设计时，这一点尤为重要，因为这些屏幕上的可用空间非常有限。弹出式菜单是另一种方案，它引导用户访问感兴趣的类别和子类别，这些弹出菜单通常集成到屏幕顶部的水平工具栏中，以弹出的形式提供更多的选择空间。

##### **骨架屏动画**

![img](https://cdn-images-1.medium.com/max/1600/1*PZEkpQ5bXxFj89cCyxpOcQ.gif)

加载动画是向用户传达操作正在被处理的一种很好的方式，但更为优秀的形式是骨架屏形式。当单击一个新链接时，骨架屏不会等待加载所有内容，而是将较大的屏幕分解为组件。首先，他们将看到页面的总体布局，然后依次看到主要内容。这些[动画类型](https://yalanti.com/blog/types-of-web-animations/)使过渡更加自然，同时也缓解了用户的不耐烦感。

##### **可视化反馈**

![img](https://cdn-images-1.medium.com/max/1600/1*ouED63deoTfb3vob8qOLbg.gif)

视觉反馈是在网站上表达动效最简单的方法之一，但也是最有效的方法之一。反馈建立在这样一个概念上：用户的行为应该由网站反映出来，并且可以用多种方式表达。登录或注册屏幕可以突出显示未正确填写的表单，或者当鼠标滚动到表单上时，简单图标可以亮起并向用户显示更多信息。

##### **图片墙以及幻灯片**

![img](https://fireart.studio/blog/wp-content/uploads/2018/06/image13.gif)

幻灯片在许多网站上很流行。它们提供了大量的图像而不影响用户体验。使用幻灯片是在网站上提供大量图片的一种有趣方式。用户可以选择查看这些图像，也可以继续搜索网站上的其他内容。

使用这种动画技术时，很关键的一点是要包含的图像数量和图像循环的速度。速度更重要，因为如果速度太快，会给用户带来不愉快的体验。 

##### **滚动效果**

![img](https://fireart.studio/blog/wp-content/uploads/2018/06/image12.gif)

滚动是用户体验的重要组成部分。在用户滚动页面时，提供合适的动效会更加吸引用户的注意力，产生继续向下滚动的兴趣。不过要注意同样要注意速度，如果让用户等待太久，他们也许就会失去耐心。

### 3 实现方式

#####css动画

首先，这里有一个[列表](https://developer.mozilla.org/en-us/docs/web/css/css_animated_properties)，列出了所有可以使用css设置动画的属性。

![img](https://cdn-images-1.medium.com/max/1600/1*7SdGWLN-vjnaCFrrU4-tuA.png)

对于几乎所有这些属性，我们可以使用两种方法之一，过渡或关键帧在CSS中设置动画。

下面是使用过渡的示例：

<iframe data-width="800" data-height="600" width="700" height="525" data-src="/media/e6a3f6f81b38fd2abea131d1ec407bae?postId=91bf5d48f980" data-media-id="e6a3f6f81b38fd2abea131d1ec407bae" data-thumbnail="https://i.embed.ly/1/image?url=https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fm.cdpn.io%2Fscreenshot-coming-soon-small.png&amp;key=4fce0568f2ce49e8b54624ef71a8a5bd" class="progressiveMedia-iframe js-progressiveMedia-iframe" allowfullscreen="" frameborder="0" src="https://medium.com/media/e6a3f6f81b38fd2abea131d1ec407bae?postId=91bf5d48f980" style="display: block; position: absolute; margin: auto; max-width: 100%; box-sizing: border-box; transform: translateZ(0px); top: 0px; left: 0px; width: 700px; height: 525px;"></iframe>

以下是使用关键帧的示例：

<iframe data-width="800" data-height="600" width="700" height="525" data-src="/media/0496a5fd19a6d69df997a8bcb3423322?postId=91bf5d48f980" data-media-id="0496a5fd19a6d69df997a8bcb3423322" data-thumbnail="https://i.embed.ly/1/image?url=https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fi.cdpn.io%2F49354.ZLJdGX.small.e3b1cfe2-7f00-4208-b95d-241d712ad527.png&amp;key=4fce0568f2ce49e8b54624ef71a8a5bd" class="progressiveMedia-iframe js-progressiveMedia-iframe" allowfullscreen="" frameborder="0" src="https://medium.com/media/0496a5fd19a6d69df997a8bcb3423322?postId=91bf5d48f980" style="display: block; position: absolute; margin: auto; max-width: 100%; box-sizing: border-box; transform: translateZ(0px); top: 0px; left: 0px; width: 700px; height: 525px;"></iframe>

#####SVG

SVG是可伸缩的矢量图形，使用CSS或简单的javascript可以很容易地进行操作。SVG通常是在Illustrator中构建，或者从网站下载SVG，然后将生成的代码复制粘贴到HTML中，如下所示：

![img](https://cdn-images-1.medium.com/max/1600/1*5IyIox_n2rq8Ju7OKywsTw.png)

VG元素上最常见的动画是为路径设置动画。这样！



![img](https://cdn-images-1.medium.com/max/1600/1*4PujH5hkUb-b5KsqCbLXoQ.gif)

为此，你可以使用CSS参数“stroke dasharray”和“stroke dashoffset”，如下所示：

```
.outline {
  stroke-dasharray: 0;
  stroke-dashoffset: 0;
  animation: offsetStrokes 4s .5s ease-in-out  forwards infinite;
}
@keyframes offsetStrokes {
  to{
   stroke-dasharray: 505;
   stroke-dashoffset: 405;
  }
}
```

[这里](https://css-tricks.com/svg-line-animation-works/)可以了解“stroke-dasharray”和“stroke-dashoffset”。

同样的，通过svg构建图形后，我们可以以操作HTML的方式来操作各种svg里面的图形，你可以查看这篇文章。

<iframe height="265" style="width: 100%;" scrolling="no" title="SVG Animation" src="//codepen.io/jjperezaguinaga/embed/preview/yuBdq/?height=265&theme-id=dark&default-tab=result" frameborder="no" allowtransparency="true" allowfullscreen="true"></iframe>

#####雪碧图

一种关于复杂动画效果，不规则动画的场景，可以试试雪碧图。将动画导出为关键帧，然后将所有帧编译成一个等间距的大文件。最后，在css中，指定dom元素移动的距离和帧速率：

[这是](https://itnext.io/creating-css-animations-using-sprite-sheet-47e2b7a3793c)一篇关于雪碧图的完整文章，可以帮助你理解关于雪碧图动画的内容。

<iframe data-width="800" data-height="600" width="700" height="525" data-src="/media/c5f0eca6d32b8b29695a10f99edb2cf6?postId=91bf5d48f980" data-media-id="c5f0eca6d32b8b29695a10f99edb2cf6" data-thumbnail="https://i.embed.ly/1/image?url=https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fi.cdpn.io%2F49354.KayMya.small.2e44d478-1615-492f-a8de-795f8b70e75c.png&amp;key=4fce0568f2ce49e8b54624ef71a8a5bd" class="progressiveMedia-iframe js-progressiveMedia-iframe" allowfullscreen="" frameborder="0" src="https://medium.com/media/c5f0eca6d32b8b29695a10f99edb2cf6?postId=91bf5d48f980" style="display: block; position: absolute; margin: auto; max-width: 100%; box-sizing: border-box; transform: translateZ(0px); top: 0px; left: 0px; width: 700px; height: 525px;"></iframe>

##### Canvas

2004年，苹果首次推出了画布元素。然后，在引入HTML5时，它在各种浏览器中被标准化。与油漆工使用的空白画布类似，<canvas>元素为用户提供一个位图区域，以便使用javascript绘制图形。它可以用来绘制图形和图形，制作照片合成，创建二维和三维动画（与WebGL一起使用），并进行实时视频处理或渲染。

HTML5 Canvas的优点：

**交互性**-任何可以在javascript中使用的事件监听器都可以与画布绘图结合在一起。

**迅速**-因为Canvas使用即时模式，图形的生成比使用保留模式的方法更快，后者会阻塞浏览器内存。

<iframe data-width="800" data-height="600" width="700" height="525" data-src="/media/446a9511b9002558c8de63ca7d288bc5?postId=8c1bad20e855" data-media-id="446a9511b9002558c8de63ca7d288bc5" data-thumbnail="https://i.embed.ly/1/image?url=https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fi.cdpn.io%2F160594.lLCxy.small.dd54d2b9-9792-41ed-8619-3702c0914392.png&amp;key=4fce0568f2ce49e8b54624ef71a8a5bd" class="progressiveMedia-iframe js-progressiveMedia-iframe" allowfullscreen="" frameborder="0" src="https://medium.com/media/446a9511b9002558c8de63ca7d288bc5?postId=8c1bad20e855" style="display: block; position: absolute; margin: auto; max-width: 100%; box-sizing: border-box; transform: translateZ(0px); top: 0px; left: 0px; width: 700px; height: 525px;"></iframe>

##### JavaScript动画库

对于网页中各种复杂的动画及模拟，使用CSS来实现就不那么合适了，我们需要使用JS库来给我们提供更多的支持来实现更多的动画效果。

1. **React-transition-group —** 一个基础CSS动画和过渡简单实现的组件, 始于React官方，主要目标是元素添加和移除时的动画。

   <iframe height="265" style="width: 100%;" scrolling="no" title="React RSVP List + React Transition Group" src="//codepen.io/sashatran/embed/preview/OmjxmE/?height=265&theme-id=dark&default-tab=result" frameborder="no" allowtransparency="true" allowfullscreen="true">
     See the Pen <a href='https://codepen.io/sashatran/pen/OmjxmE/'>React RSVP List + React Transition Group</a> by Sasha 
     (<a href='https://codepen.io/sashatran'>@sashatran</a>) on <a href='https://codepen.io'>CodePen</a>.
   </iframe>

2. **react-animations —** React-animations 实现了animate.css的所有动画，简单易用。

3. **ant-motion —** antd官方提供的动画解决方案，覆盖了大部分网页动效。

4. **react-spring—**灵感始于react-motion，提供了更加完整的解决方案，通过对弹簧效果的完整实现，模拟更加真实的交互体验

<iframe src="https://codesandbox.io/embed/zrj66y8714?autoresize=1&fontsize=14&hidenavigation=1&view=preview" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>
